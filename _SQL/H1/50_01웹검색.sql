-- 종류, 아이템코드, p2, p3, p4, p5, p6, p7, p8, p9, p10, 게임아이디, ps2, ps3, ps4, 메세지
--유저메세지(1)
--exec spu_HomerunD 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--정확한 검색
--exec spu_HomerunD 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'Sa', '', '', '', ''			--와일드검색

--블럭로그(2)
--exec spu_HomerunD 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''
--exec spu_HomerunD 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'Sa', '', '', '', ''
--exec spu_HomerunD 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'AA', '', '', '', ''
--블럭설정[관리모드](8)
--exec spu_HomerunD 8, -1, -1, 17, 1, -1, -1, -1, -1, -1, 'SangSang', 'SangSang2', '172.0.0.1', '관리자가 입력한 메세지', ''

--삭제로그(10)
--exec spu_HomerunD 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''
--exec spu_HomerunD 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'Sa', '', '', '', ''
--exec spu_HomerunD 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'AA', '', '', '', ''
--삭제설정[관리모드](11)
--exec spu_HomerunD 11, -1, -1, 1, 1, -1, -1, -1, -1, -1, 'SangSang', 'SangSang2', '172.0.0.1', '관리자가 입력한 메세지', ''

--배틀로그(3)
--exec spu_HomerunD 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''
--exec spu_HomerunD 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'Sa', '', '', '', ''
--exec spu_HomerunD 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'DD1', '', '', '', ''
--exec spu_HomerunD 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '586843627', ''		--직접검색
--exec spu_HomerunD 3, -1, -1, 1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''				--이상파워감지
--배틀검색로그(15)
--exec spu_HomerunD 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--유저비정상정보로그(4)
--exec spu_HomerunD 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--개발용아이템정보(5)
--exec spu_HomerunD 5, -1, -1, 1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 5, 0, -1,  1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 5, -1, 1,  1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 5, -1, -1, 2, -1, -1, -1, -1, -1, -1, '', '', '', '', ''

-- 퀘스트정보(24)
--exec spu_HomerunD 24, 1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--퀘스트 정보
--exec spu_HomerunD 24, 2, 100, 100, 2, 20, 750, -1, 0, 1, '0', '100', '', '', 'xxxx'		--퀘스트 수정

--유저아이템구매로그
--exec spu_HomerunD 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--유저검색()
--exec spu_HomerunD 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''
--exec spu_HomerunD 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''
--exec spu_HomerunD 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '01022223333', '', '', ''
--exec spu_HomerunD 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '01045943736', '', '', ''

--유저강화정보(9)
--exec spu_HomerunD 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--캐쉬환전(12)
--exec spu_HomerunD 12, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 12, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--캐쉬구매(13)
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, 1, '', '', '', '', ''
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, 2, '', '', '', '', ''
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, 456, '', '', '', '', ''
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, 457, '', '', '', '', ''
--exec spu_HomerunD 13, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--캐쉬증가
--exec spu_HomerunD 16, -1, -1, 123, 123, 123, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--캐쉬감소
--exec spu_HomerunD 23, -1, -1, 10, 10, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--캐쉬로그삭제
--exec spu_HomerunD 17, -1, -1, 1, 19, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''
--exec spu_HomerunD 17, -1, -1, 2, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''

--유저진짜삭제(18)
--select * from dbo.tUserMaster where gameid = 'DD77'
--exec spu_HomerunD 18, -1, -1, -1, -1, -1, -1, -1, -1, -1, 'DD77', '', '', '', ''

--유저세팅변경(19)
--select blockstate, deletestate, * from dbo.tUserMaster where gameid = 'aaaa'
--exec spu_HomerunD 19, -1, -1, 0, -1, -1, -1, -1, -1, -1, 'aaaa', 'admin', '', '', ''		--블럭
--exec spu_HomerunD 19, -1, -1, 800, -1, -1, -1, -1, -1, -1, 'aaaa', 'admin', '', '', ''	--계정블럭, 핸드폰 블럭(관련계정 모두블럭)
--exec spu_HomerunD 19, -1, -1, 1, -1, -1, -1, -1, -1, -1, 'aaaa', 'admin', '', '', ''		--삭제
--exec spu_HomerunD 19, -1, -1, 2, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--코인+1
--exec spu_HomerunD 19, -1, -1, 8, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--락커룸실버볼량
--exec spu_HomerunD 19, -1, -1, 9, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--락커룸코인타임복구
--exec spu_HomerunD 19, -1, -1, 90, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--락커룸코인타임복구
--exec spu_HomerunD 19, -1, -1, 91, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--락커룸코인타임복구
--exec spu_HomerunD 19, -1, -1, 92, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--락커룸코인타임복구
--exec spu_HomerunD 19, -1, -1, 10, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--더블모드타임 (-1)일
--exec spu_HomerunD 19, -1, -1, 11, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--더블모드타임 (+1)일
--exec spu_HomerunD 19, -1, -1, 12, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--스테미너자유이용 (-1)일
--exec spu_HomerunD 19, -1, -1, 13, -1, -1, -1, -1, -1, -1, 'superman', '', '', '', ''	--스테미너자유이용 (+1)일
--exec spu_HomerunD 19, -1, -1, 3, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--배틀템+1 (3, 4, 5, 6, 7)
--exec spu_HomerunD 19, -1, -1, 20, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--게임시작플래그 (20 ~ 24)
--exec spu_HomerunD 19, -1, -1, 60, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--배틀연승, 스프린트연승(60,61)
--exec spu_HomerunD 19, -1, -1, 30, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--grade업(30), 다운(31)
--exec spu_HomerunD 19, -1, -1, 35, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--lv업(35), 다운(36)
--exec spu_HomerunD 19, -1, -1, 40, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '867784611', ''	--로그삭제
--exec spu_HomerunD 19, -1, -1, 40, -1, -1, -1, -1, -1, -1, 'xxxaaa', '', '', '1118944419', ''	--로그삭제
--exec spu_HomerunD 19, 101, -1, 50, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--아이템만기
--exec spu_HomerunD 19, 101, -1, 51, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--아이템 1일 연장
--exec spu_HomerunD 19, 101, -1, 70, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--아이템강화
--exec spu_HomerunD 19, 1, -1, 100, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--QuestData변경 100 ~
--exec spu_HomerunD 19, -1, -1, 200, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--Quest 전일순환
--exec spu_HomerunD 19, -1, -1, 300, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--SMS+1
--exec spu_HomerunD 19, -1, -1, 302, 1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--SMS > 로그삭제
--exec spu_HomerunD 19, -1, -1, 400, 1, -1, -1, -1, -1, -1, 'guest74019', '관리자ID', '[푸쉬제목]', '[푸쉬내용]', 'LANUCH'
--exec spu_HomerunD 19, -1, -1, 400, 3, -1, -1, -1, -1, -1, 'guest74019', '관리자ID', '[푸쉬제목URL]', '[푸쉬내용URL]', 'http://m.tstore.co.kr'
--exec spu_HomerunD 19, -1, -1, 401, 1, 1, -1, -1, -1, -1, '관리자ID', '관리자ID', '[푸쉬제목]', '[푸쉬내용]', 'LANUCH'
--exec spu_HomerunD 19, -1, -1, 401, 3, 1, -1, -1, -1, -1, '관리자ID', '관리자ID', '[푸쉬제목URL]', '[푸쉬내용URL]', 'http://m.tstore.co.kr'
--exec spu_HomerunD 19, -1, -1, 402, -1, -1, -1, -1, -1, -1, 'SangSang', '', '', '', ''	--Push cnt
--exec spu_HomerunD 19, -1, -1, 500, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--toto개발자 삭제
--exec spu_HomerunD 19, -1, -1, 501, -1, -1, -1, -1, -1, -1, '관리자ID', '', '', '', ''			--toto리스트
--exec spu_HomerunD 19, -1, -1, 501, -1, -1, -1, -1, -1, -1, '관리자ID', 'superman6', '', '', ''	--toto리스트(이름있음)
--exec spu_HomerunD 19, -1, -1, 600,  1, -1, -1, -1, -1, -1, '관리자ID', '', '', '', ''				--tMessage > newmsg = 1로 변경
--exec spu_HomerunD 19, -1, -1, 700,  2, -1, -1, -1, -1, -1, '관리자ID', '', '', '', ''	--관리자가 유저대상으로 코인지급
--exec spu_HomerunD 19, 6000, -1, 701, -1, -1, -1, -1, -1, -1, '관리자ID', '', '', '', ''	--관리자가 유저최근 1주일 유저에게 선물지급(배틀템)
-- guest74022 guest74019

--뉴리스트 정보(26)
--exec spu_HomerunD 26, -1, -1, 301, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--SMS list
--exec spu_HomerunD 26, -1, -1, 301, -1, -1, -1, -1, -1, -1, 'DD10', '', '', '', ''		--SMS list(검색)
--exec spu_HomerunD 26, -1, -1, 400, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--SMS list
--exec spu_HomerunD 26, -1, -1, 400, -1, -1, -1, -1, -1, -1, 'superman7', '', '', '', ''		--SMS list(검색)
--exec spu_HomerunD 26, -1, -1, 401, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--SMS list
--exec spu_HomerunD 26, -1, -1, 401, -1, -1, -1, -1, -1, -1, '', '20130204', '', '', ''		--SMS list(검색)



--공지사항작성(20)
--select top 100 * from dbo.tNotice order by writedate desc
--exec spu_HomerunD 20, -1, -1, 2, -1, -1, -1, -1, -1, -1, '', '', '', '', ''						--리스트
--exec spu_HomerunD 20, -1, -1, 0, 1, 0, -1, -1, -1, -1, '', '', '', '', '오픈을 축하 합니다.'		--작성 > 비활성상태로작성됨
--exec spu_HomerunD 20, -1, -1, 1, 1, 1, -1, -1, -1, -1, '', '', '', '', '오픈을 축하 합니다.'		--활성
--exec spu_HomerunD 20, -1, -1, 1, 1, 0, -1, -1, -1, -1, '', '', '', '', '오픈을 축하 합니다.'		--비활성
--exec spu_HomerunD 20, -1, -1, 1, 1, 1, -1, -1, -1, -1, '', '', '', 'http://m.naver.com', '오픈을 축하 합니다.'		--활성
--exec spu_HomerunD 20, -1, -1, 12, -1, -1, -1, -1, -1, -1, '', '', '', 'http://m.naver.com', ''	--패치리스트
--exec spu_HomerunD 20, -1, -1, 10, 1, 0, 100, -1, -1, -1, '', '', '', 'http://m.naver.com', ''		--패치입력
--exec spu_HomerunD 20, -1, -1, 11, 1, 0, 100, -1, -1, -1, '', '', '', 'http://m.naver.com', ''		--패치수정
--exec spu_HomerunD 20, -1, -1, 12, 1, 0, 100, -1, -1, -1, '', '', '', 'http://m.naver.com', ''		--패치수정
--exec spu_HomerunD 20, -1, -1, 20, 1, -1, -1, -1, -1, -1, '', '', '', 'http://m.naver.com', '짜릿한 홈런리그한판 어떤가요?!!!'		--SMS URL 입력
--exec spu_HomerunD 20, -1, -1, 21, 1, -1, -1, -1, -1, -1, '', '', '', 'http://m.naver.com', '1짜릿한 홈런리그한판 어떤가요?!!!'		--SMS URL 수정
--exec spu_HomerunD 20, -1, -1, 22, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--SMS URL
--exec spu_HomerunD 20, -1, -1, 30, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--블럭처리.
--exec spu_HomerunD 20, -1, -1, 31, -1, -1, -1, -1, -1, -1, '', '', '', '01011112222', '아이템카피'		--블럭처리.
--exec spu_HomerunD 20, -1, -1, 34, -1, -1, -1, -1, -1, -1, '', '', '', '01011112222', '아이템카피'		--블럭처리.
--exec spu_HomerunD 20, -1, -1, 32, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--SMS블럭처리폰.
--exec spu_HomerunD 20, -1, -1, 33, -1, -1, -1, -1, -1, -1, '', '', '', '01011112222', '아이템카피'		--SMS블럭처리폰.
--exec spu_HomerunD 20, -1, -1, 40, -1, 3, 50, 50, 20, -1, '', '', '', '', '내용'		--더블파워아이템 세팅
--exec spu_HomerunD 20, -1, -1, 41,  1, 1, 52, 53, 24, -1, '', '', '', '', '내용'		--더블파워아이템 수정
--exec spu_HomerunD 20, -1, -1, 42, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--더블파워아이템 읽기
--exec spu_HomerunD 20, -1, -1, 50, -1, 3, 50, 50, 20, -1, '', '', '', '', '내용'		--업그레이드 세팅
--exec spu_HomerunD 20, -1, -1, 51,  1, 1, 52, 53, 24, -1, '', '', '', '', '내용'		--업그레이드 수정
--exec spu_HomerunD 20, -1, -1, 52, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			--업그레이드 읽기
--exec spu_HomerunD 20, -1, -1, 60, 7020, 5, 7021, 5, 7022, 7, '7023', '20', '7024', '50', '내용'			-- 역전 아이템 > 입력
--exec spu_HomerunD 20, -1,  1, 61, 7020, 15, 7021, 15, 7022, 17, '7023', '120', '7024', '150', '내용'		-- > 수정
--exec spu_HomerunD 20, -1, -1, 62, -1, -1, -1, -1, -1, -1, '', '', '', '', ''								-- > 검색
--exec spu_HomerunD 20, -1, -1, 70, 6, 10, 50, 1, 0, 0, '', '', '', '', '내용'		-- 스테미너 > 입력
--exec spu_HomerunD 20, -1,  1, 71, 6, 10, 50, 1, 0, 0, '', '', '', '', '내용'		-- > 수정
--exec spu_HomerunD 20, -1, -1, 72, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			-- > 검색
--exec spu_HomerunD 20, -1, -1, 80, -1, -1, -1, -1, -1, -1, '', '', '', '', '내용'		-- 복수전 > 검색
--exec spu_HomerunD 20, -1, -1, 80, -1, -1, -1, -1, -1, -1, '', 'superman7', '', '', '내용'
--exec spu_HomerunD 20, -1, -1, 80, -1, -1, -1, -1, -1, -1, '', '', 'superman', '', '내용'
--exec spu_HomerunD 20, -1, 19, 81, -1, -1, -1, -1, -1, -1, '', '', '', '', '내용'		-- > 수정(플래그변경, 날짜 최신)




-- 통계자료(21)
--exec spu_HomerunD 21, -1, -1,  0, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--캐쉬토탈(0)
--exec spu_HomerunD 21, -1, -1,  0, -1, -1, -1, -1, -1, -1, '', '20120819', '', '', ''
--exec spu_HomerunD 21, -1, -1,  1, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--배틀아이템사용토탈(1)
--exec spu_HomerunD 21, -1, -1,  1, -1, -1, -1, -1, -1, -1, '', '20120819', '', '', ''
--exec spu_HomerunD 21, -1, -1,  2, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--캐쉬환전(2)
--exec spu_HomerunD 21, -1, -1,  2, -1, -1, -1, -1, -1, -1, '', '20120819', '', '', ''
--exec spu_HomerunD 21, -1, -1,  3, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--아이템구매(3)
--exec spu_HomerunD 21, -1, -1,  3, -1, -1, -1, -1, -1, -1, '', '20120831', '', '', ''
--exec spu_HomerunD 21, -1, -1,  4, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--아이템업그레이드(4)
--exec spu_HomerunD 21, -1, -1,  4, -1, -1, -1, -1, -1, -1, '', '20120819', '', '', ''
--exec spu_HomerunD 21, -1, -1,  5, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--국가통계(5)
--exec spu_HomerunD 21, -1, -1,  5, -1, -1, -1, -1, -1, -1, '', '201209', '', '', ''
--exec spu_HomerunD 21, -1, -1,  6, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--게임모드통계(6)
--exec spu_HomerunD 21, -1, -1,  6, -1, -1, -1, -1, -1, -1, '', '20120928', '', '', ''
--exec spu_HomerunD 21, -1, -1,  7, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--스프린트통계(7)
--exec spu_HomerunD 21, -1, -1,  7, -1, -1, -1, -1, -1, -1, '', '20120928', '', '', ''
--exec spu_HomerunD 21, -1, -1,  8, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--룰렛통계(8)
--exec spu_HomerunD 21, -1, -1,  8, -1, -1, -1, -1, -1, -1, '', '20120928', '', '', ''
--exec spu_HomerunD 21, -1, -1,  9, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--룰렛개인통계(9)
--exec spu_HomerunD 21, -1, -1,  9, -1, -1, -1, -1, -1, -1, 'guest73344', '', '', '', ''
--exec spu_HomerunD 21, -1, -1, 10, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--가입통계(9)
--exec spu_HomerunD 21, -1, -1, 10, -1, -1, -1, -1, -1, -1, '', '20121119', '', '', ''
--exec spu_HomerunD 21, -1, -1, 11, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--SMS(11)
--exec spu_HomerunD 21, -1, -1, 11, -1, -1, -1, -1, -1, -1, '', '20121119', '', '', ''
--exec spu_HomerunD 21, -1, -1, 12, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--Push(12)
--exec spu_HomerunD 21, -1, -1, 12, -1, -1, -1, -1, -1, -1, '', '20121119', '', '', ''
--exec spu_HomerunD 21, -1, -1, 13, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--아이템구매프로모션(13)
--exec spu_HomerunD 21, -1, -1, 13, -1, -1, -1, -1, -1, -1, '', '20130105', '', '', ''
--exec spu_HomerunD 21, -1, -1, 14, -1, -1, -1, -1, -1, -1, '', 'blackm', '', '', ''	--관리자 액선정보
--exec spu_HomerunD 21, -1, -1, 15, -1, -1, -1, -1, -1, -1, '', '', '', '', ''	--SMS추천 > 방문카운터카운터
--exec spu_HomerunD 21, -1, -1, 16, -1, -1, -1, -1, -1, -1, '', '', '', '', ''	--이벤트 통계(11)
--exec spu_HomerunD 21, -1, -1, 16, -1, -1, -1, -1, -1, -1, '', '20121119', '', '', ''
--exec spu_HomerunD 21, -1, -1, 20, -1, -1, -1, -1, -1, -1, '', '', '', '', ''	-- 각통계별 랭킹
--exec spu_HomerunD 21, -1, -1, 20, -1, -1, -1, -1, -1, -1, '', '20130117', '', '', ''	-- 각통계별 랭킹
--exec spu_HomerunD 21, -1, -1, 30, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			-- 로그인 플래인 랭킹
--exec spu_HomerunD 21, -1, -1, 30, -1, -1, -1, -1, -1, -1, '', '2013012322', '', '', ''
--exec spu_HomerunD 21, -1, -1, 40, -1, -1, -1, -1, -1, -1, '', '', '', '', ''			-- 핸드폰별 유니크 체크
--exec spu_HomerunD 21, -1, -1, 40, -1, -1, -1, -1, -1, -1, '', '01122', '', '', ''
--exec spu_HomerunD 21, -1, -1, 50, -1, -1, -1, -1, -1, -1, '', '', '', '', ''		--SMS 추천
--exec spu_HomerunD 21, -1, -1, 50, -1, -1, -1, -1, -1, -1, '', 'dddd', '', '', ''
--exec spu_HomerunD 21, -1, -1, 50, -1, -1, -1, -1, -1, -1, '', '', '01011112222', '', ''
--exec spu_HomerunD 21, -1, -1, 60, -1, -1, -1, -1, -1, -1, '', '', '', '', ''				-- 유료 가입자 색인정보 체크
--exec spu_HomerunD 21, -1, -1, 60, -1, -1, -1, -1, -1, -1, '', '01022223333', '', '', ''	-- 유료 가입자 색인정보 검색
--exec spu_HomerunD 21, -1, -1, 61, 1, -1, -1, -1, -1, -1, '', '', '', '', ''				-- 유료 가입자 색인정보 삭제
--exec spu_HomerunD 21, -1, -1, 70, -1, -1, -1, -1, -1, -1, '', '', '', '', ''				-- 유료 가입자 색인정보 체크
--exec spu_HomerunD 21, -1, -1, 70, -1, -1, -1, -1, -1, -1, '', '01022223333', '', '', ''	-- 유료 가입자 색인정보 검색
--exec spu_HomerunD 21, -1, -1, 71, 1, -1, -1, -1, -1, -1, '', '', '', '', ''				-- 유료 가입자 색인정보 삭제

/*
--TestOpenBeta(22)
IF OBJECT_ID (N'dbo.tTestOpenBeta', N'U') IS NOT NULL
	DROP TABLE dbo.tTestOpenBeta;
GO

create table dbo.tTestOpenBeta(
	--(가입)
	idx			int 					IDENTITY(1, 1),

	email		varchar(60),
	ordercnt	int						default(1),

	phonenum	varchar(60),

	writedate	datetime				default(getdate()),

	-- Constraint
	CONSTRAINT pk_tTestOpenBeta_email	PRIMARY KEY(email, ordercnt)
)
GO

-- alter table dbo.tTestOpenBeta add writedate	datetime				default(getdate())
-- update dbo.tTestOpenBeta set writedate = getdate()
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'idx_tTestOpenBeta_idx')
   DROP INDEX tTestOpenBeta.idx_tTestOpenBeta_idx
GO
CREATE INDEX idx_tTestOpenBeta_idx ON tTestOpenBeta(idx)
GO

*/
--exec spu_HomerunD 22, -1, -1, 1, 1, -1, -1, -1, -1, -1, '', 'aaa@aaa.com', '0112682109', '', ''		--모집 1차
--exec spu_HomerunD 22, -1, -1, 1, 2, -1, -1, -1, -1, -1, '', 'aaa@aaa.com', '0112682109', '', ''		--모집 2차
--exec spu_HomerunD 22, -1, -1, 10, 1, -1, -1, -1, -1, -1, '', 'aaa@aaa.com', '0112682109', '', ''		--리스트 1차
--exec spu_HomerunD 22, -1, -1, 10, 2, -1, -1, -1, -1, -1, '', 'aaa@aaa.com', '0112682109', '', ''		--리스트 2차



IF OBJECT_ID ( 'dbo.spu_HomerunD', 'P' ) IS NOT NULL
    DROP PROCEDURE dbo.spu_HomerunD;
GO

------------------------------------------------
--	1. 개발일반 프로세서
------------------------------------------------
create procedure dbo.spu_HomerunD
	@kind_			int,
	@itemcode_		int,
	@itemkind_		int,
	@p4_			int,
	@p5_			int,
	@p6_			int,
	@p7_			int,
	@p8_			int,
	@p9_			int,
	@p10_			bigint,
	@gameid_		varchar(512),
	@ps2_			varchar(512),
	@ps3_			varchar(512),
	@ps4_			varchar(512),
	@message_		varchar(2048)
	WITH ENCRYPTION -- 프로시져를 암호화함.
as
	------------------------------------------------
	-- 일반값
	declare @RESULT_SUCCESS						int				set @RESULT_SUCCESS						=  1
	declare @RESULT_ERROR						int				set @RESULT_ERROR						= -1

	------------------------------------------------
	--	프로시져 종류
	------------------------------------------------
	declare @KIND_USER_MESSAGE					int				set @KIND_USER_MESSAGE					= 1
	declare @KIND_USER_BLOCK_LOG				int				set @KIND_USER_BLOCK_LOG				= 2
	declare @KIND_USER_BLOCK_RELEASE			int				set @KIND_USER_BLOCK_RELEASE			= 8
	declare @KIND_USER_DELETE_LOG				int				set @KIND_USER_DELETE_LOG				= 10
	declare @KIND_USER_DELETE_RELEASE			int				set @KIND_USER_DELETE_RELEASE			= 11
	declare @KIND_BATTLE_LOG					int				set @KIND_BATTLE_LOG					= 3
	declare @KIND_BATTLE_SEARCHLOG				int				set @KIND_BATTLE_SEARCHLOG				= 15
	declare @KIND_USER_UNUSUAL_LOG				int				set @KIND_USER_UNUSUAL_LOG				= 4
	declare @KIND_SEARCH_ITEMINFO				int				set @KIND_SEARCH_ITEMINFO				= 5
	declare @KIND_ITEM_BUY_LOG					int				set @KIND_ITEM_BUY_LOG					= 6
	declare @KIND_USER_SEARCH					int				set @KIND_USER_SEARCH					= 7
	declare @KIND_USER_ITEM_UPGRADE				int				set @KIND_USER_ITEM_UPGRADE 			= 9
	declare @KIND_USER_CASH_CHANGE				int				set @KIND_USER_CASH_CHANGE				= 12
	declare @KIND_USER_CASH_BUY					int				set @KIND_USER_CASH_BUY					= 13
	declare @KIND_USER_CASH_PLUS				int				set @KIND_USER_CASH_PLUS				= 16
	declare @KIND_USER_CASH_MINUS				int				set @KIND_USER_CASH_MINUS				= 23
	declare @KIND_USER_CASH_LOG_DELETE			int				set @KIND_USER_CASH_LOG_DELETE			= 17
	declare @KIND_USER_DELETEID					int				set @KIND_USER_DELETEID					= 18
	declare @KIND_USER_SETTING					int				set @KIND_USER_SETTING					= 19
	declare @KIND_NOTICE_SETTING				int				set @KIND_NOTICE_SETTING				= 20
	declare @KIND_STATISTICS_INFO				int				set @KIND_STATISTICS_INFO				= 21
	declare @KIND_OPEN_TEST						int				set @KIND_OPEN_TEST						= 22
	declare @KIND_QUEST_INFO					int				set @KIND_QUEST_INFO					= 24
	declare @KIND_ADMIN_LOGIN					int				set @KIND_ADMIN_LOGIN					= 25
	declare @KIND_NEWINFO_LIST					int				set @KIND_NEWINFO_LIST					= 26

	-- 상태값.
	declare @BLOCK_STATE_NO						int				set	@BLOCK_STATE_NO						= 0				-- 블럭상태아님
	declare @BLOCK_STATE_YES					int				set	@BLOCK_STATE_YES					= 1				-- 블럭상태
	declare @DELETE_STATE_NO					int				set	@DELETE_STATE_NO					= 0				-- 삭제상태아님
	declare @DELETE_STATE_YES					int				set	@DELETE_STATE_YES					= 1				-- 삭제상태

	-- 아이템 분류
	declare @ITEM_UPGRADE_BRANCH_GOLD			int 			set @ITEM_UPGRADE_BRANCH_GOLD			= 1				-- > 금강화
	declare @ITEM_UPGRADE_BRANCH_SILVER 		int 			set @ITEM_UPGRADE_BRANCH_SILVER			= 2				-- > 은강화
	declare @ITEM_UPGRADE_BRANCH_DONG 			int 			set @ITEM_UPGRADE_BRANCH_DONG			= 3				-- > 동강화
	declare @ITEM_UPGRADE_BRANCH_PLATINUM		int 			set @ITEM_UPGRADE_BRANCH_PLATINUM		= 4				-- > 백금강화

	-- 통신사 구분값
	declare @SKT 							int					set @SKT						= 1
	declare @KT 							int					set @KT							= 2
	declare @LGT 							int					set @LGT						= 3
	declare @FACKBOOK 						int					set @FACKBOOK					= 4
	declare @GOOGLE 						int					set @GOOGLE						= 5
	declare @NHN							int					set @NHN						= 6
	declare @IPHONE							int					set @IPHONE						= 7
	declare @NHNWEB							int					set @NHNWEB						= 8
	declare @SKT2 							int					set @SKT2						= 11
	declare @KT2 							int					set @KT2						= 12
	declare @LGT2 							int					set @LGT2						= 13
	declare @GOOGLE2 						int					set @GOOGLE2					= 15
	declare @XXXXXXXXXXXXXXXXXXX			int					set @XXXXXXXXXXXXXXXXXXX		= 99

	-- 기타변수
	declare @DEVELOP_DATE 						datetime		set @DEVELOP_DATE						= '2050-12-15'
	------------------------------------------------
	--	일반변수선언
	------------------------------------------------
	declare @str			varchar(40)
	declare @idx 			int			set @idx 			= @p4_
	declare @adminid		varchar(40)	set @adminid 		= @ps2_
	declare @adminip		varchar(40)	set @adminip 		= @ps3_
	declare @comment2		varchar(40)	set @comment2 		= @ps4_
	declare @comment		varchar(40)
	declare @comment3		varchar(1048)	-- 임시내부용 변수
	declare @goldball 		int
	declare @silverball 	int
	declare @goldball2 		int
	declare @silverball2 	int
	declare @actioncount 	int
	declare @subkind		int
	declare @syscheck		int
	declare @dateid 		varchar(8)
	declare @dateid6 		varchar(6)
	declare @dateid8 		varchar(8)
	declare @dateid10 		varchar(10) set @dateid10 		= Convert(varchar(8), Getdate(),112) + Convert(varchar(2), Getdate(), 108)
	declare @gradeexp		int
	declare @grade			int
	declare @gradestar		int
	declare @btidx			varchar(40)
	declare @period			int
	declare @email			varchar(40)
	declare @phonenum		varchar(40)
	declare @ordercnt		int
	declare @branchurl		varchar(512)
	declare @mboardurl		varchar(512)
	declare @facebookurl	varchar(512)
	declare @adurl			varchar(512)
	declare @adfile			varchar(512)
	declare @cash			int

	declare @market			int
	declare @buytype		int
	declare @version		int
	declare @questkind		int
	declare @p1				int				set @p1	 = @kind_
	declare @p2				int				set @p2	 = @itemcode_
	declare @p3				int				set @p3	 = @itemkind_
	declare @ps1			varchar(40)		set @ps1 = @gameid_

	declare @recepushid		varchar(512)
	declare @maxPage		int				set @maxPage = 1
	declare @idxPage		int				set @idxPage = 1
	declare @cnt			int
	declare @cnt2			int

	declare @gameid			varchar(20)
	declare @chalsb 		int 			set @chalsb = 0

	declare @phone 			varchar(20)

Begin
	------------------------------------------------
	--	초기화
	------------------------------------------------
	set nocount on

	------------------------------------------------
	--	각상태분기
	------------------------------------------------
	if(@kind_ in (@KIND_USER_MESSAGE))
		begin
			-- 유저메세지 보기
			if(isnull(@gameid_, '') = '')
				begin
					-- select top 10 * from dbo.tMessage order by idx desc
					-- select top 10 * from dbo.tMessage order by writedate desc
					--select '1'
					select top 200 * from dbo.tMessage order by idx desc
				end
			else
				begin
					-- select top 10 * from dbo.tMessage where gameid like '%' + 'SangSang' + '%' order by idx desc
					-- 내부에서 최적화 하나보다.
					--select '2'
					-- top 20는 연속해서 20 있으면 바로 리턴
					-- top 20에서 중간 중간 있으면 스캔... 스캔... 스캔....개수를 채운다.

					--if(exists(select top 1 * from dbo.tMessage where gameid = @gameid_))
					--	begin
					--		----------------------------------
					--		-- 정확한 검색
					--		----------------------------------
					--		select top 100 * from dbo.tMessage where gameid = @gameid_ order by idx desc
					--	end
					--else
					--	begin
					--		----------------------------------
					--		-- 와일드검색
					--		----------------------------------
					--		set @str = @gameid_ + '%'
					--		select top 100 * from dbo.tMessage where gameid like @str order by idx desc
					--	end
					----------------------------------
					-- 정확한 검색
					----------------------------------
					select top 200 * from dbo.tMessage where gameid = @gameid_ order by idx desc


				end
		end
	-----------------------------------------------------
	--	유저 블럭리스트, 블럭해제
	-----------------------------------------------------
	else if(@kind_ in (@KIND_USER_BLOCK_LOG))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					-- select top 10 * from dbo.tUserBlockLog order by idx desc
					select top 100 * from dbo.tUserBlockLog order by idx desc
				end
			else
				begin
					--if(exists(select top 1 * from dbo.tUserBlockLog where gameid = @gameid_))
					--	begin
					--		--------------------------------------------
					--		-- 블럭로그가 존재하면 상세하기
					--		--------------------------------------------
					--		select top 100 * from dbo.tUserBlockLog where gameid = @gameid_ order by idx desc
					--
					--		select * from dbo.tUserUnusualLog where gameid = @gameid_ order by idx desc
					--	end
					--else
					--	begin
					--		--------------------------------------------
					--		-- 없으면 와일드 검색
					--		--------------------------------------------
					--		set @str = @gameid_ + '%'
					--		select top 100 * from dbo.tUserBlockLog where gameid like @str order by idx desc
					--	end
					--------------------------------------------
					-- 블럭로그가 존재하면 > 상세하기
					--------------------------------------------
					select top 100 * from dbo.tUserBlockLog where gameid = @gameid_ order by idx desc

					select * from dbo.tUserUnusualLog where gameid = @gameid_ order by idx desc


				end
		end
	else if(@kind_ in (@KIND_USER_BLOCK_RELEASE))
		begin

			if(isnull(@gameid_, '') = ''
				or isnull(@idx, -1) = -1
				or isnull(@adminid, '') = ''
				or isnull(@adminip, '') = ''
				or isnull(@comment2, '') = '')
					begin
						select @RESULT_ERROR 'rtn', @gameid_, @adminid, @adminip, @comment2
					end
			else
				begin
					--exec spu_HomerunD 8, -1, -1, 17, -1, -1, -1, -1, -1, -1, 'SangSang', 'SangSang', '172.0.0.1', '관리자가 입력한 메세지', ''
					update dbo.tUserMaster
						set
							blockstate = 0
						where gameid = @gameid_

					update dbo.tUserBlockLog
						set
							blockstate = 0,
							adminid = @adminid,
							adminip = @adminip,
							comment2 = @comment2,
							releasedate = getdate()
						where idx = @idx


					select @RESULT_SUCCESS 'rtn'
					--select * from dbo.tUserBlockLog
					--update dbo.tUserBlockLog  set blockstate = 1

				end
		end
	-----------------------------------------------------
	--	유저 삭제리스트, 해제
	-----------------------------------------------------
	else if(@kind_ in (@KIND_USER_DELETE_LOG))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					-- select top 10 * from dbo.tUserDeleteLog order by idx desc
					select top 100 * from dbo.tUserDeleteLog order by idx desc
				end
			else
				begin
					--if(exists(select top 1 * from dbo.tUserDeleteLog where gameid = @gameid_))
					--	begin
					--		----------------------------------
					--		-- 정확한 검색
					--		----------------------------------
					--		select top 100 * from dbo.tUserDeleteLog where gameid = @gameid_ order by idx desc
					--	end
					--else
					--	begin
					--		----------------------------------
					--		-- 와일드검색
					--		----------------------------------
					--		set @str = @gameid_ + '%'
					--		select top 100 * from dbo.tUserDeleteLog where gameid like @str order by idx desc
					--	end

					----------------------------------
					-- 정확한 검색
					----------------------------------
					select top 100 * from dbo.tUserDeleteLog where gameid = @gameid_ order by idx desc

				end
		end
	else if(@kind_ in (@KIND_USER_DELETE_RELEASE))
		begin
			if(isnull(@gameid_, '') = ''
				or isnull(@idx, -1) = -1
				or isnull(@adminid, '') = ''
				or isnull(@adminip, '') = ''
				or isnull(@comment2, '') = '')
					begin
						select @RESULT_ERROR 'rtn', @gameid_, @adminid, @adminip, @comment2
					end
			else
				begin
					--exec spu_HomerunD 11, -1, -1, 1, -1, -1, -1, -1, -1, -1, 'SangSang', 'SangSang', '172.0.0.1', '관리자가 입력한 메세지', ''
					update dbo.tUserMaster
						set
							deletestate = 0
						where gameid = @gameid_

					update dbo.tUserDeleteLog
						set
							deletestate = 0,
							adminid = @adminid,
							adminip = @adminip,
							comment2 = @comment2,
							releasedate = getdate()
						where idx = @idx


					select @RESULT_SUCCESS 'rtn'
				end
		end


	-----------------------------------------------------
	--	배틀로그
	-----------------------------------------------------
	else if(@kind_ in (@KIND_BATTLE_LOG))
		begin
			set @subkind = @p4_
			if(@subkind = -1)
				begin
					set @btidx = @ps4_
					if((isnull(@gameid_, '') = '') and (isnull(@btidx, '') = ''))
						begin
							--select '1'
							-- select top 20 * from dbo.tBattleLog order by idx desc
							select top 100 * from dbo.tBattleLog
							order by idxOrder desc
						end
					else if(isnull(@btidx, '') != '')
						begin
							--로그검색
							--select '2'
							select top 10 * from dbo.tBattleLog
							where idx = @btidx
						end
					else
						begin
							--select '3'
							----------------------------------
							-- 정확한 검색 너무 늦어서
							----------------------------------
							select top 100 * from dbo.tBattleLog
							where gameid = @gameid_
							order by idxOrder desc
						end
				end
			else if(@subkind = 1)
				begin
					select top 100 * from dbo.tBattleLog
					where btAvg > 4600
					order by btAvg desc
				end
		end
	-----------------------------------------------------
	--	배틀검색로그
	-----------------------------------------------------
	else if(@kind_ in (@KIND_BATTLE_SEARCHLOG))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					select top 100 * from dbo.tBattleLogSearch order by idx desc
				end
			else
				begin
					select top 200 * from dbo.tBattleLogSearch where gameid = @gameid_ order by idx desc
				end
		end
	-----------------------------------------------------
	--	비정상적인 행동로그
	-----------------------------------------------------
	else if(@kind_ in (@KIND_USER_UNUSUAL_LOG))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					-- select top 20 * from dbo.tUserUnusualLog order by idx desc
					select top 100 * from dbo.tUserUnusualLog order by idx desc
				end
			else
				begin
					-- select top 20 * from dbo.tUserUnusualLog where gameid like '%' + 'SangSang' + '%' order by idx desc
					--set @str = '%' + @gameid_ + '%'
					--select top 20 * from dbo.tUserUnusualLog where gameid like @str order by idx desc
					select top 200 * from dbo.tUserUnusualLog where gameid = @gameid_ order by idx desc
				end
		end
	-----------------------------------------------------
	--	아이템정보
	-----------------------------------------------------
	else if(@kind_ in (@KIND_SEARCH_ITEMINFO))
		begin
			set @subkind = @p4_
			if(@p4_	= 1)
				begin
					if(@itemcode_ != -1)
						begin
							-- select * from dbo.tItemInfo where itemcode = 0 order by itemcode asc
							select * from dbo.tItemInfo where itemcode = @itemcode_ order by itemcode asc
						end
					else if(@itemkind_ != -1)
						begin
							-- select * from dbo.tItemInfo where kind = 0
							--내부에서 자동 인덱싱
							select * from dbo.tItemInfo where kind = @itemkind_
						end
					else
						begin
							-- select * from dbo.tItemInfo order by itemcode asc
							select * from dbo.tItemInfo where kind not in (51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61)  order by itemcode asc
						end
				end
		end
	-----------------------------------------------------
	--	퀘스트 정보
	-----------------------------------------------------
	else if(@kind_ in (@KIND_QUEST_INFO))
		begin
			set @subkind = @p2
			if(@subkind	= 1)
				begin
					select * from dbo.tQuestInfo
				end
			else if(@subkind = 2)
				begin
					update dbo.tQuestInfo
						set
						questkind 		= @p4_,
						questsubkind 	= @p5_,
						questvalue 		= @p6_,
						rewardsb 		= @p7_,
						rewarditem 		= @p8_,
						questtime  		= @p9_,
						questinit		= @p10_,
						questclear 		= @ps1,
						questorder 		= @ps2_,
						questlv 		= @ps3_,
						content 		= @message_
					where questcode = @p3

					select 1 'rtn'
				end
		end
	-----------------------------------------------------
	--	아이템 구매로그
	-----------------------------------------------------
	else if(@kind_ in (@KIND_ITEM_BUY_LOG))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					--select 1
					-- select top 20 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode order by a.idx desc
					select top 200 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode order by a.idx desc
				end
			else
				begin
					--select 2
					-- select top 20 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode where gameid like '%' + 'SangSang' + '%' order by a.idx desc
					--set @str = '%' + @gameid_ + '%'
					--select top 20 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode
					--where gameid like @str order by a.idx desc
					select top 200 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode
					where gameid = @gameid_ order by a.idx desc
				end
		end
	-----------------------------------------------------
	--	유저로그
	-----------------------------------------------------
	else if(@kind_ in (@KIND_USER_SEARCH))
		begin
			if(isnull(@ps2_, '') != '')
				begin
					select top 100 * from dbo.tUserMaster where phone = @ps2_ order by idx desc
				end
			else if(isnull(@gameid_, '') = '')
				begin
					select @idx = max(idx) from dbo.tUserMaster
					set @maxPage = (@idx - 1) / 25
					set @idxPage = @p10_
					if(@idxPage > @maxPage)
						begin
							set @idxPage = @maxPage
						end
					set @idxPage = @idx - (@idxPage - 1) * 25

					if(@idxPage = -1)
						begin
							select top 25 *, @maxPage maxPage from dbo.tUserMaster                       order by idx desc
						end
					else
						begin
							select top 25 *, @maxPage maxPage from dbo.tUserMaster where idx <= @idxPage order by idx desc
						end
				end
			else
				begin
					-----------------------------------------
					-- 유저정보
					-----------------------------------------
					select * from dbo.tUserMaster where gameid = @gameid_ order by idx desc

					---------------------------------------------
					-- 진행퀘스트
					---------------------------------------------
					--select gameid, i.questlv, u.questcode, u.queststate, queststart, questend, questnext, questkind, questsubkind, questvalue, rewardsb, rewarditem, content, questtime, questclear
					--from dbo.tQuestUser u join
					--	(select * from dbo.tQuestInfo) i
					--		on u.questcode = i.questcode
					--where gameid = @gameid_
					--order by questcode asc

					select gameid, i.questlv, u.questcode, u.queststate, queststart, questend, questnext, questkind, questsubkind, questvalue, rewardsb, rewarditem, content, questtime, questclear
					from
						(select * from dbo.tQuestUser where gameid = @gameid_) u
							join
						(select * from dbo.tQuestInfo) i
							on u.questcode = i.questcode
					--where gameid = @gameid_



					-----------------------------------------
					-- 커스터마이징
					-----------------------------------------
					select u.*, i.itemname from dbo.tUserCustomize u join
						(select itemcode, itemname from dbo.tItemInfo) i
							on u.itemcode = i.itemcode
					where gameid = @gameid_

					-----------------------------------------
					-- 유저보유 아이템 > 보유템 리스트 출력, 순서가 바로 정렬이다. ㅎㅎㅎ
					--select * from dbo.tUserItem where gameid = 'SangSang'
					--declare @gameid_ varchar(20) set @gameid_ = 'SangSang'
					-----------------------------------------
					select top 500 * from dbo.tUserItem u join
						(select itemcode, itemname, period from dbo.tItemInfo) i
							on u.itemcode = i.itemcode
					where gameid = @gameid_
					order by u.itemcode
					--order by expiredate desc
					--order by idx desc

					-----------------------------------------
					--유저 구매로그
					-----------------------------------------
					select top 10 a.idx 'idx', gameid, a.itemcode 'itemcode', a.goldball 'goldball', a.silverball 'silverball', a.buydate, b.itemname, b.silverball 'silverball2', b.goldball 'goldball2', b.period, b.explain from dbo.tItemBuyLog a join dbo.tItemInfo b on a.itemcode = b.itemcode
					where gameid = @gameid_ order by a.idx desc

					-----------------------------------------
					--유저메세지로그정보
					--declare @gameid_ varchar(20) set @gameid_ = 'SangSang'
					-----------------------------------------
					select top 10 * from dbo.tMessage
					where gameid = @gameid_
					order by idx desc

					-----------------------------------------
					--강화로그출력
					--declare @gameid_ varchar(20) set @gameid_ = 'SangSang'
					-----------------------------------------
					select top 10 * from dbo.tUserItemUpgradeLog u join
							(select itemcode, itemname from dbo.tItemInfo) i
								on u.itemcode = i.itemcode
					where gameid = @gameid_
					order by idx desc

					-----------------------------------------
					-- 배틀 점프, 검색,  로그
					-----------------------------------------
					select top 10 * from dbo.tBattleLogSearchJump
					where gameid = @gameid_
					order by idx desc

					select top 10 * from dbo.tBattleLogSearch
					where gameid = @gameid_
					order by idx desc

					select top 10 * from dbo.tBattleLog
					where gameid = @gameid_
					order by idxOrder desc

					---------------------------------------------
					-- 캐쉬로그, 환전
					---------------------------------------------
					select top 10 * from dbo.tCashLog
					where gameid = @gameid_
					order by idx desc

					select top 10 * from dbo.tCashChangeLog
					where gameid = @gameid_
					order by idx desc

					---------------------------------------------
					-- 선물리스트
					---------------------------------------------
					select a.idx idx2, gameid, gainstate, gaindate, giftid, giftdate, a.period2, b.* from
						(select top 10 * from dbo.tGiftList where gameid = @gameid_ order by giftdate desc) a
						INNER JOIN
						dbo.tItemInfo b
						ON a.itemcode = b.itemcode

					---------------------------------------------
					-- 비정상행동
					---------------------------------------------
					select top 10 * from dbo.tUserUnusualLog
					where gameid = @gameid_
					order by idx desc

					---------------------------------------------
					-- 유저블럭킹
					---------------------------------------------
					select top 10 * from dbo.tUserBlockLog
					where gameid = @gameid_
					order by idx desc

					---------------------------------------------
					-- 유저삭제
					---------------------------------------------
					select top 10 * from dbo.tUserDeleteLog
					where gameid = @gameid_
					order by idx desc


					---------------------------------------------
					-- 유저친구
					---------------------------------------------
					select * from dbo.tUserFriend
					where gameid = @gameid_
					order by familiar desc


					---------------------------------------------
					-- 유저룰렛
					---------------------------------------------
					select top 10 * from dbo.tRouletteLogPerson
					where gameid = @gameid_
					order by idx desc

					---------------------------------------------
					-- 문자 추천
					---------------------------------------------
					select top 10 * from dbo.tUserSMSLog
					where gameid = @gameid_
					order by idx desc

					---------------------------------------------
					-- Toto 추천
					---------------------------------------------
					select top 10 u.*,
						m.totodate, m.title, m.acountry, m.bcountry, m.apoint, m.bpoint, m.victcountry, m.victpoint, m.chalmode1give, m.chalmode2give, m.givedate
					from dbo.tTotoUser u join dbo.tTotoMaster m on u.totoid = m.totoid
					where gameid = @gameid_
					order by u.idx desc

				end
		end

	else if(@kind_ in (@KIND_USER_ITEM_UPGRADE))
		begin
			if(isnull(@gameid_, '') = '')
				begin
					--강화로그출력
					--declare @gameid_ varchar(20) set @gameid_ = 'SangSang'
					select top 100 * from dbo.tUserItemUpgradeLog u join
							(select itemcode, itemname from dbo.tItemInfo) i
								on u.itemcode = i.itemcode
					order by idx desc
				end
			else
				begin
					--강화로그출력
					--declare @gameid_ varchar(20) set @gameid_ = 'SangSang'
					select top 100 * from dbo.tUserItemUpgradeLog u join
							(select itemcode, itemname from dbo.tItemInfo) i
								on u.itemcode = i.itemcode
					where gameid = @gameid_
					order by idx desc
				end
		end
	else if(@kind_ in (@KIND_USER_CASH_CHANGE))
		begin
			-- 유저환전로그
			if(isnull(@gameid_, '') = '')
				begin
					select top 100 * from dbo.tCashChangeLog order by idx desc
				end
			else
				begin
					select top 200 * from dbo.tCashChangeLog where gameid = @gameid_ order by idx desc
				end
		end
	else if(@kind_ in (@KIND_USER_CASH_BUY))
		begin
			-- 유저환전로그
			select @idx = max(idx) from dbo.tCashLog
			set @maxPage = (@idx - 1) / 25
			set @idxPage = @p10_
			if(@idxPage > @maxPage)
				begin
					set @idxPage = @maxPage
				end
			set @idxPage = @idx - (@idxPage - 1) * 25


			if(isnull(@gameid_, '') = '')
				begin
					if(@idxPage = -1)
						begin
							select top 25 *, @maxPage maxPage from dbo.tCashLog order by idx desc
						end
					else
						begin
							select top 25 *, @maxPage maxPage from dbo.tCashLog where idx <= @idxPage order by idx desc
						end
				end
			else
				begin
					if(@idxPage = -1)
						begin
							select *, @maxPage maxPage from dbo.tCashLog where gameid = @gameid_ order by idx desc
						end
					else
						begin
							select *, @maxPage maxPage from dbo.tCashLog where gameid = @gameid_ and idx <= @idxPage order by idx desc
						end
				end
		end

	else if(@kind_ in (@KIND_STATISTICS_INFO))
		begin
			-- 전체통계
			set @dateid = @ps2_
			set @subkind = @p4_

			if(@subkind = 0)
				begin
					select @idx = max(idx) from dbo.tCashTotal
					set @maxPage = (@idx - 1) / 25
					set @idxPage = @p10_
					if(@idxPage > @maxPage)
						begin
							set @idxPage = @maxPage
						end
					set @idxPage = @idx - (@idxPage - 1) * 25

					if(isnull(@dateid, '') = '')
						begin
							if(@idxPage = -1)
								begin
									select top 25 *, @maxPage maxPage  from dbo.tCashTotal                        order by dateid desc, market asc, cashkind desc
								end
							else
								begin
									select top 25 *, @maxPage maxPage  from dbo.tCashTotal where idx <= @idxPage  order by dateid desc, market asc, cashkind desc
								end
						end
					else
						begin
							if(@idxPage = -1)
								begin
									select top 25 *, @maxPage maxPage  from dbo.tCashTotal where dateid = @dateid                     order by dateid desc, market asc, cashkind desc
								end
							else
								begin
									select top 25 *, @maxPage maxPage  from dbo.tCashTotal where dateid = @dateid and idx <= @idxPage order by dateid desc, market asc, cashkind desc
								end
						end
				end
			else if(@subkind = 1)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tBattleItemUseTotal order by dateid desc
						end
					else
						begin
							select top 100 * from dbo.tBattleItemUseTotal where dateid = @dateid
						end
				end
			else if(@subkind = 2)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tCashChangeLogTotal order by dateid desc
						end
					else
						begin
							select top 100 * from dbo.tCashChangeLogTotal where dateid = @dateid
						end
				end
			else if(@subkind = 3)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tItemBuyLogTotalMaster
							order by dateid desc
						end
					else
						begin
							select         t.*, i.itemname
							from dbo.tItemBuyLogTotalSub t join dbo.tItemInfo i on t.itemcode = i.itemcode
							where dateid = @dateid
							order by t.goldball desc, t.silverball desc
						end
				end
			else if(@subkind = 13)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 t.*, i.itemname
							from dbo.tItemBuyPromotionTotal t join dbo.tItemInfo i on t.itemcode = i.itemcode
							order by dateid desc
						end
					else
						begin
							select         t.*, i.itemname
							from dbo.tItemBuyPromotionTotal t join dbo.tItemInfo i on t.itemcode = i.itemcode
							where dateid = @dateid
							order by t.goldball desc
						end
				end
			else if(@subkind = 8)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tRouletteLogTotalMaster order by dateid desc
						end
					else
						begin
							select * from dbo.tRouletteLogTotalSub where dateid = @dateid
							order by goldball desc, silverball desc
						end
				end
			else if(@subkind = 9)
				begin
					if(isnull(@gameid_, '') = '')
						begin
							select top 100 * from dbo.tRouletteLogPerson order by idx desc
						end
					else
						begin
							select top 200 * from dbo.tRouletteLogPerson
							where gameid = @gameid_
							order by idx desc
						end
				end
			else if(@subkind = 4)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tUserItemUpgradeLogTotal order by dateid desc
						end
					else
						begin
							select         * from dbo.tUserItemUpgradeLogTotal where dateid = @dateid
						end
				end
			else if(@subkind = 5)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid6 = Convert(varchar(6),Getdate(),112)
							select top 100 rank() over(order by win desc, lose asc) as rank, dateid, ccode, win btwin, (lose + win) bttotal from dbo.tBattleCountry
							where dateid = @dateid6
						end
					else
						begin
							set @dateid6 = @dateid
							select         rank() over(order by win desc, lose asc) as rank, dateid, ccode, win btwin, (lose + win) bttotal from dbo.tBattleCountry
							where dateid = @dateid6
						end
				end
			else if(@subkind = 6)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select * from dbo.tUserGameMode
							where dateid > @dateid8
							order by dateid desc, gmode desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserGameMode
							where dateid = @dateid8
							order by gmode desc
						end
				end
			else if(@subkind = 7)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select * from dbo.tUserGameSprintReward
							where dateid > @dateid8
							order by dateid desc, step desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserGameSprintReward
							where dateid = @dateid8
							order by step desc
						end
				end
			--8 번은 룰렛통계로 사용한다.
			--9 번은 룰렛개인통계로 사용한다.
			else if(@subkind = 10)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select * from dbo.tUserJoinTotal
							where dateid > @dateid8
							order by dateid desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserJoinTotal
							where dateid = @dateid8
							order by dateid desc
						end
				end
			else if(@subkind = 11)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select top 100 * from dbo.tUserSMSLogTotal
							where dateid >= @dateid8
							order by dateid desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserSMSLogTotal
							where dateid = @dateid8
							order by dateid desc
						end
				end
			else if(@subkind = 16)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select top 100 * from dbo.tEventCertNoLogTotal
							where dateid >= @dateid8
							order by dateid desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tEventCertNoLogTotal
							where dateid = @dateid8
							order by dateid desc
						end
				end
			else if(@subkind = 12)
				begin
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select top 100 * from dbo.tUserPushAndroidTotal
							where dateid >= @dateid8
							order by dateid desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserPushAndroidTotal
							where dateid = @dateid8
							order by dateid desc
						end
				end
			else if(@subkind = 14)
				begin
					if(isnull(@adminid, '') = '')
						begin
							select top 100 * from tMessageAdmin order by idx desc
						end
					else
						begin
							select top 100 * from tMessageAdmin where adminid = @adminid
						end
				end
			else if(@subkind = 15)
				begin
					begin
						set @dateid8 = Convert(varchar(8), Getdate(),112)

						if(not exists(select top 1 * from dbo.tUserSMSLogTotal where dateid = @dateid8))
							begin
								insert into dbo.tUserSMSLogTotal(dateid, cnt, cnt2)
								values(@dateid8, 0, 1)
							end
						else
							begin
								update dbo.tUserSMSLogTotal
									set cnt2 = cnt2 + 1
								where dateid = @dateid8
							end


						select 1 rtn, @dateid8 dateid8
					end
				end
			else if(@subkind = 20)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select * from dbo.tUserMasterSchedule order by dateid desc
						end
					else
						begin
							select * from dbo.tRankTotal
							where dateid = @dateid order by gamemode desc, rank asc
						end
				end
			else if(@subkind = 30)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tStaticTime
							--where dateid10 >= @dateid10
							order by dateid10 desc, market asc
						end
					else
						begin
							if(len(@ps2_) = 8)
								begin
									select * from dbo.tStaticTime
									where dateid10 like @ps2_ + '%'
									order by dateid10 desc, market asc
								end
							else
								begin
									select * from dbo.tStaticTime
									where dateid10 = @ps2_
									order by dateid10 desc, market asc
								end
						end
				end
			else if(@subkind = 40)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tUserPhone
							order by idx desc
						end
					else
						begin
							if(exists(select * from dbo.tUserPhone where phone = @ps2_))
								begin
									select * from dbo.tUserPhone where phone = @ps2_
								end
							else
								begin
									set @str = @ps2_ + '%'
									select top 100 * from dbo.tUserPhone
									where phone like @str
									order by idx desc
								end
						end
				end
			else if(@subkind = 50)
				begin
					if(isnull(@ps2_, '') != '' )
						begin
							if(exists(select * from dbo.tUserSMSReward where gameid = @ps2_))
								begin
									select * from dbo.tUserSMSReward where gameid = @ps2_
								end
							else
								begin
									set @str = @ps2_ + '%'
									select top 100 * from dbo.tUserSMSReward
									where gameid like @str
									order by gameid desc, idx desc
								end
						end
					else if(isnull(@ps3_, '') != '' )
						begin
							if(exists(select * from dbo.tUserSMSReward where recphone = @ps3_))
								begin
									select * from dbo.tUserSMSReward where recphone = @ps3_
								end
							else
								begin
									set @str = @ps2_ + '%'
									select top 100 * from dbo.tUserSMSReward
									where recphone like @str
									order by recphone desc, idx desc
								end
						end
					else
						begin
							select top 100 * from dbo.tUserSMSReward
							order by idx desc
						end

				end
			else if(@subkind = 60)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tUserPay
							order by idx desc
						end
					else
						begin
							if(exists(select * from dbo.tUserPay where phone = @ps2_))
								begin
									select * from dbo.tUserPay where phone = @ps2_
								end
							else
								begin
									set @str = @ps2_ + '%'
									select top 100 * from dbo.tUserPay
									where phone like @str
									order by idx desc
								end
						end
				end
			else if(@subkind = 61)
				begin
					delete from dbo.tUserPay where idx = @p5_
					select 1 'rtn'
				end
			else if(@subkind = 70)
				begin
					if(isnull(@dateid, '') = '')
						begin
							select top 100 * from dbo.tUserPayEvent
							order by idx desc
						end
					else
						begin
							if(exists(select * from dbo.tUserPayEvent where phone = @ps2_))
								begin
									select * from dbo.tUserPayEvent where phone = @ps2_
								end
							else
								begin
									set @str = @ps2_ + '%'
									select top 100 * from dbo.tUserPayEvent
									where phone like @str
									order by idx desc
								end
						end
				end
			else if(@subkind = 71)
				begin
					delete from dbo.tUserPayEvent where idx = @p5_
					select 1 'rtn'
				end
		end
	else if(@kind_ = @KIND_NOTICE_SETTING)
		begin
			set @subkind 	= @p4_
			set @idx 		= @p5_
			set @syscheck 	= @p6_
			set @adurl		= @gameid_
			set @adfile		= @ps2_
			set @facebookurl= @ps3_
			set @mboardurl 	= @ps3_
			set @branchurl	= @ps4_
			--set @subkind 	= @message_
			set @market		= @p5_
			set @buytype	= @p6_
			set @version	= @p7_

			if(@subkind = 0)
				begin
					--검색2번
					--insert into dbo.tNotice(comment, syscheck, branchurl, facebookurl, adurl, adfile)
					--values(@message_, @syscheck, @branchurl, @facebookurl, @adurl, @adfile)
					--
					select top 100 *, isnull(branchurl, '') as branchurl2, isnull(facebookurl, '') as facebookurl2 from dbo.tNotice order by idx desc
				end
			else if(@subkind = 1)
				begin
					--검색2번
					--update dbo.tNotice
					--	set
					--		comment 	= @message_,
					--		branchurl 	= @branchurl,
					--		facebookurl = @facebookurl,
					--		adurl		= @adurl,
					--		adfile		= @adfile,
					--
					--		syscheck 	= @syscheck
					--where idx = @idx
					--
					select top 100 *, isnull(branchurl, '') as branchurl2, isnull(facebookurl, '') as facebookurl2 from dbo.tNotice order by idx desc
				end
			else if(@subkind = 2)
				begin
					--검색2번
					select top 100 *, isnull(branchurl, '') as branchurl2, isnull(facebookurl, '') as facebookurl2 from dbo.tNotice order by idx desc
				end
			else if(@subkind = 10)
				begin
					insert into dbo.tMarketPatch(market, buytype, version, branchurl, mboardurl)
					values(@market, @buytype, @version, @branchurl, @mboardurl)

					select * from dbo.tMarketPatch order by market asc
				end
			else if(@subkind = 11)
				begin
					update dbo.tMarketPatch
						set
							version = @version,
							branchurl = @branchurl,
							mboardurl = @mboardurl,
							writedate = getdate()
					where market = @market and buytype = @buytype

					select * from dbo.tMarketPatch order by market asc
				end
			else if(@subkind = 12)
				begin
					select * from dbo.tMarketPatch order by market asc
				end
			else if(@subkind = 20)
				begin
					insert into dbo.tSMSRecommend(url, comment, gamekind)
					values(@ps4_, @message_, @p6_)

					select * from dbo.tSMSRecommend order by idx desc
				end
			else if(@subkind = 21)
				begin
					update dbo.tSMSRecommend
						set
							url = @ps4_,
							comment = @message_,
							gamekind = @p6_
					where idx = @idx

					select * from dbo.tSMSRecommend order by idx desc
				end
			else if(@subkind = 22)
				begin
					select * from dbo.tSMSRecommend order by idx desc
				end
			else if(@subkind = 30)
				begin
					select top 100 * from dbo.tUserBlockPhone order by idx desc
				end
			else if(@subkind = 31)
				begin
					if(not exists(select top 1   * from dbo.tUserBlockPhone where phone = @ps4_))
						begin
							insert into dbo.tUserBlockPhone(phone, comment) values(@ps4_, @message_)
						end

					select 1 rtn
				end
			else if(@subkind = 34)
				begin
					if(exists(select top 1   * from dbo.tUserBlockPhone where phone = @ps4_))
						begin
							delete from dbo.tUserBlockPhone where phone = @ps4_
						end

					select 1 rtn
				end
			else if(@subkind = 32)
				begin
					select top 100 * from dbo.tSMSBlock order by idx desc
				end
			else if(@subkind = 33)
				begin
					if(not exists(select top 1   * from dbo.tSMSBlock where phone = @ps4_))
						begin
							insert into dbo.tSMSBlock(phone) values(@ps4_)
						end

					select 1 rtn
				end
			else if(@subkind = 40)
				begin
					insert into dbo.tDoubleModeInfo(doubleperiodinfo, doublepowerinfo, doubledegreeinfo, doublepriceinfo, comment)
					values(@p6_, @p7_, @p8_, @p9_, @message_)

					select * from dbo.tDoubleModeInfo order by idx desc
				end
			else if(@subkind = 41)
				begin
					update dbo.tDoubleModeInfo
						set
							doubleperiodinfo = @p6_,
							doublepowerinfo = @p7_,
							doubledegreeinfo = @p8_,
							doublepriceinfo = @p9_,
							comment = @message_
					where idx = @idx

					select * from dbo.tDoubleModeInfo order by idx desc
				end
			else if(@subkind = 42)
				begin
					select * from dbo.tDoubleModeInfo order by idx desc
				end
			else if(@subkind = 50)
				begin
					insert into dbo.tItemUpgradeInfo(petitemupgradebase, petitemupgradestep, normalitemupgradebase, normalitemupgradestep, permanentstep, comment)
					values(@p6_, @p7_, @p8_, @p9_, @p10_, @message_)

					select * from dbo.tItemUpgradeInfo order by idx desc
				end
			else if(@subkind = 51)
				begin
					update dbo.tItemUpgradeInfo
						set
							petitemupgradebase 		= @p6_,
							petitemupgradestep 		= @p7_,
							normalitemupgradebase 	= @p8_,
							normalitemupgradestep 	= @p9_,
							permanentstep			= @p10_,
							comment = @message_
					where idx = @idx

					select * from dbo.tItemUpgradeInfo order by idx desc
				end
			else if(@subkind = 52)
				begin
					select * from dbo.tItemUpgradeInfo order by idx desc
				end
			else if(@subkind = 60)
				begin
					insert into dbo.tRevModeInfo(btrevitemcode, btrevprice, msrevitemcode4, msrevprice4, msrevitemcode7, msrevprice7, msrevitemcode8, msrevprice8, msrevitemcode9, msrevprice9, comment)
					values(@p5_, @p6_, @p7_, @p8_, @p9_, @p10_, @ps1, @ps2_, @ps3_, @ps4_, @message_)
					select * from dbo.tRevModeInfo order by idx desc
				end
			else if(@subkind = 61)
				begin
					update dbo.tRevModeInfo
						set
							btrevitemcode	= @p5_,
							btrevprice		= @p6_,
							msrevitemcode4	= @p7_,
							msrevprice4		= @p8_,
							msrevitemcode7	= @p9_,
							msrevprice7		= @p10_,
							msrevitemcode8	= @ps1,
							msrevprice8		= @ps2_,
							msrevitemcode9	= @ps3_,
							msrevprice9		= @ps4_,
							comment 		= @message_
					where idx = @p3

					select * from dbo.tRevModeInfo order by idx desc
				end
			else if(@subkind = 62)
				begin
					select * from dbo.tRevModeInfo order by idx desc
				end
			else if(@subkind = 70)
				begin
					insert into dbo.tActionInfo(halfmodeprice, fullmodeprice, freemodeprice, freemodeperiod, plusgoldball, plussilverball, comment)
					values(@p5_, @p6_, @p7_, @p8_, @p9_, @p10_, @message_)

					select * from dbo.tActionInfo order by idx desc
				end
			else if(@subkind = 71)
				begin
					update dbo.tActionInfo
						set
							halfmodeprice	= @p5_,
							fullmodeprice	= @p6_,
							freemodeprice	= @p7_,
							freemodeperiod	= @p8_,
							plusgoldball	= @p9_,
							plussilverball	= @p10_,
							comment 		= @message_
					where idx = @p3

					select * from dbo.tActionInfo order by idx desc
				end
			else if(@subkind = 72)
				begin
					select * from dbo.tActionInfo order by idx desc
				end
			else if(@subkind = 80)
				begin
					if(isnull(@ps2_, '') != '' )
						begin
							select top 100 * from dbo.tUserRevenge
							where gameid = @ps2_
							order by idx desc
						end
					else if(isnull(@ps3_, '') != '' )
						begin
							select top 100 * from dbo.tUserRevenge
							where btpgameid = @ps3_
							order by idx desc
						end
					else
						begin
							select top 100 * from dbo.tUserRevenge order by idx desc
						end

				end
			else if(@subkind = 81)
				begin
					update dbo.tUserRevenge
						set
							btpflag	= 1,
							btptime	= getdate()
					where idx = @p3

					select 1 rtn
				end

		end
	-----------------------------------------------------------------------
	-- 개발기간까지만 작동됨
	-----------------------------------------------------------------------
	else if(@kind_ = @KIND_USER_CASH_PLUS)
		begin
			set @goldball		= isnull(@p4_ , 0)
			set @silverball		= isnull(@p5_ , 0)
			set @actioncount	= isnull(@p6_ , 0)

			if(isnull(@gameid_, '') != '' and getdate() < @DEVELOP_DATE)
				begin
					update dbo.tUserMaster
						set
							goldball = goldball + @goldball,
							silverball = silverball + @silverball,
							actioncount = case @actioncount
											when 0 then actioncount
											else actionMax
										  end
					where gameid = @gameid_

					--관리자 행동 기록
					set @comment3 = ltrim(rtrim(@goldball)) + '골드Plus ' + ltrim(rtrim(@silverball)) + '실버Plus '
					exec spu_AdminAction @adminid, @gameid_, @comment3
					--insert into tMessageAdmin(adminid, gameid, comment)
					--values(@adminid, @gameid_, @comment3);


					select @RESULT_SUCCESS 'rtn'
				end
			else
				begin
					select @RESULT_ERROR 'rtn'
				end
		end
	else if(@kind_ = @KIND_USER_CASH_MINUS)
		begin
			set @goldball		= isnull(@p4_ , 0)
			set @silverball		= isnull(@p5_ , 0)

			if(@goldball > 0)
				begin
					set @goldball = -@goldball
				end

			if(@silverball > 0)
				begin
					set @silverball = -@silverball
				end

			if(isnull(@gameid_, '') != '')
				begin
					select @goldball2 = goldball, @silverball2 = silverball from dbo.tUserMaster where gameid = @gameid_


					update dbo.tUserMaster
						set
							goldball = case when goldball + @goldball < 0 then 0 else goldball + @goldball end,
							silverball = case when silverball + @silverball < 0 then 0 else silverball + @silverball end
					where gameid = @gameid_


					--관리자 행동 기록
					set @comment3 = ltrim(rtrim(@goldball)) + '골드차감 ' + ltrim(rtrim(@silverball)) + '실버차감 '
					exec spu_AdminAction @adminid, @gameid_, @comment3
					--insert into tMessageAdmin(adminid, gameid, comment)
					--values(@adminid, @gameid_, @comment3);


					if(@goldball != 0)
						begin
							if(-@goldball > @goldball2)
								begin
									set @goldball = -@goldball2
								end
							set @comment = '골든볼 ' + ltrim(rtrim(@goldball)) + ' 차감'
							insert into tMessage(gameid, comment) values(@gameid_,  @comment)
						end

					if(@silverball != 0)
						begin
							if(-@silverball > @silverball2)
								begin
									set @silverball = -@silverball2
								end
							set @comment = '실버볼 ' + ltrim(rtrim(@silverball)) + ' 차감'
							insert into tMessage(gameid, comment) values(@gameid_,  @comment)
						end




					select @RESULT_SUCCESS 'rtn'
				end
			else
				begin
					select @RESULT_ERROR 'rtn'
				end
		end
	else if(@kind_ = @KIND_USER_CASH_LOG_DELETE)
		begin
			--if(isnull(@gameid_, '') = '')
			--	begin
			--		select @RESULT_ERROR 'rtn'
			--		return
			--	end

			set @idx 			= @p5_
			if(@p4_ = 0)
				begin
					----------------------------------------------
					-- 검색 > 로그삭제, 차감
					----------------------------------------------
					select
						@dateid = Convert(varchar(8), writedate, 112),
						@market = market,
						@goldball = goldball,
						@cash = cash
					from dbo.tCashLog
					where idx = @idx and gameid = @gameid_

					-- 로그삭제
					delete dbo.tCashLog where idx = @idx and gameid = @gameid_

					-- 통계차감
					update dbo.tCashTotal
						set
							goldball = goldball - @goldball,
							cash = cash - @cash,
							cnt = cnt - 1
					where dateid = @dateid and cashkind = @cash and market = @market

					select @RESULT_SUCCESS 'rtn'
				end
			else if(@p4_ = 1)
				begin
					----------------------------------------------
					-- 검색 > 로그삭제, 차감
					----------------------------------------------
					-- 2-1. 커서 설정
					declare curCashLog Cursor for
					select Convert(varchar(8), writedate, 112), market, goldball, cash, idx from dbo.tCashLog where gameid = @gameid_

					-- 2-2. 커서오픈
					open curCashLog

					-- 2-3. 커서 사용
					Fetch next from curCashLog into @dateid, @market, @goldball, @cash, @idx
					while @@Fetch_status = 0
						Begin
							-- 로그삭제
							delete dbo.tCashLog where idx = @idx and gameid = @gameid_

							-- 통계차감
							update dbo.tCashTotal
								set
									goldball = goldball - @goldball,
									cash = cash - @cash,
									cnt = cnt - 1
							where dateid = @dateid and cashkind = @cash and market = @market

							Fetch next from curCashLog into @dateid, @market, @goldball, @cash, @idx
						end

					-- 2-4. 커서닫기
					close curCashLog
					Deallocate curCashLog

					select @RESULT_SUCCESS 'rtn'
				end

		end
	else if(@kind_ = @KIND_USER_DELETEID)
		begin
			if(isnull(@gameid_, '') != '' and getdate() < @DEVELOP_DATE)
				begin
					delete from dbo.tUserMaster where gameid = @gameid_
					delete from dbo.tUserCustomize where gameid = @gameid_
					delete from dbo.tUserItem where gameid = @gameid_
					delete from dbo.tMessage where gameid = @gameid_
					select @RESULT_SUCCESS 'rtn'
				end
			else
				begin
					select @RESULT_ERROR 'rtn'
				end
		end
	else if(@kind_ = @KIND_USER_SETTING)
		begin

			if(isnull(@gameid_, '') != '' and getdate() < @DEVELOP_DATE)
				begin
					if(@p4_ = 0)
						begin
							-- 블럭 로그 기록
							update dbo.tUserMaster
								set
									blockstate = case blockstate
													when @BLOCK_STATE_YES then @BLOCK_STATE_NO
													else @BLOCK_STATE_YES
												end
							where gameid = @gameid_

							-- 블럭정보
							select @p4_ = blockstate from dbo.tUserMaster where gameid = @gameid_
							if(@p4_ = @BLOCK_STATE_YES)
								begin
									insert into dbo.tUserBlockLog(gameid, comment)
									values(@gameid_, '관리자(' + @ps2_ + ')가 직접 블럭 처리했습니다.')
								end

						end
					else if(@p4_ = 800)
						begin
							-- 폰번호를 검색
							select @phone = phone from dbo.tUserMaster where gameid = @gameid_

							--if(@phone != '' or @phone != '-1')
							if(LEN(@phone) > 5)
								begin
									-- 무조건 블럭처리
									update dbo.tUserMaster set blockstate = @BLOCK_STATE_YES where phone = @phone

									-- 블럭폰 등록, 로그.
									if(not exists(select top 1   * from dbo.tUserBlockPhone where phone = @phone))
										begin
											insert into dbo.tUserBlockPhone(phone, comment) values(@phone, '캐쉬치트해서 일괄블럭함(' + @ps2_ + ')')

											insert into dbo.tUserBlockLog(gameid, comment)
											values(@gameid_, '관리자(' + @ps2_ + ')가 직접 블럭 처리했습니다.')
										end
								end
							else
								begin
									-- 무조건 블럭처리
									update dbo.tUserMaster set blockstate = @BLOCK_STATE_YES where gameid = @gameid_

									-- 블럭폰 등록, 로그.
									insert into dbo.tUserBlockLog(gameid, comment)
									values(@gameid_, '관리자(' + @ps2_ + ')가 직접 블럭 처리했습니다.')
								end
						end
					else if(@p4_ = 1)
						begin
							-- 삭제, 로그 기록
							update dbo.tUserMaster
								set
									deletestate = case deletestate
													when @DELETE_STATE_YES then @DELETE_STATE_NO
													else @DELETE_STATE_YES
												end
							where gameid = @gameid_

							-- 삭제로그 기록하기
							select @p4_ = deletestate from dbo.tUserMaster where gameid = @gameid_
							if(@p4_ = @BLOCK_STATE_YES)
								begin
									insert into dbo.tUserDeleteLog(gameid, comment)
									values(@gameid_, '관리자(' + @ps2_ + ')가 직접 삭제했습니다.')
								end


						end
					else if(@p4_ = 2)
						begin
							update dbo.tUserMaster set coin = coin + 1
							where gameid = @gameid_
						end
					else if(@p4_ = 8)
						begin
							update dbo.tUserMaster
								set
									friendLSCount = friendLSMax,
									friendLSTime = getdate() - 1		--하루 전시간
							where gameid = @gameid_
						end
					else if(@p4_ = 9)
						begin
							update dbo.tUserMaster
								set
									coindate = getdate() - 1		--하루 전시간
							where gameid = @gameid_
						end
					else if(@p4_ = 90)
						begin
							update dbo.tUserMaster
								set
									actionTime = getdate() - 1		--하루 전시간
							where gameid = @gameid_
						end
					else if(@p4_ = 91)
						begin
							update dbo.tUserMaster
								set
									actionCount = actionCount - 1		--한개차감
							where gameid = @gameid_
						end
					else if(@p4_ = 10)
						begin
							update dbo.tUserMaster
								set
									doubledate = doubledate - 1
							where gameid = @gameid_
							exec spu_AdminAction @adminid, @gameid_, '더블모드 시간 (-1)일 '
						end
					else if(@p4_ = 11)
						begin
							update dbo.tUserMaster
								set
									doubledate = doubledate + 1
							where gameid = @gameid_

							exec spu_AdminAction @adminid, @gameid_, '더블모드 시간 (+1)일 '
						end
					else if(@p4_ = 12)
						begin
							update dbo.tUserMaster
								set
									actionfreedate = actionfreedate - 1
							where gameid = @gameid_
							exec spu_AdminAction @adminid, @gameid_, '더블모드 시간 (-1)일 '
						end
					else if(@p4_ = 13)
						begin
							update dbo.tUserMaster
								set
									actionfreedate = actionfreedate + 1
							where gameid = @gameid_

							exec spu_AdminAction @adminid, @gameid_, '더블모드 시간 (+1)일 '
						end
					--배틀템 추가지
					else if(@p4_ = 3)
						begin
							update dbo.tUserMaster set bttem1cnt = bttem1cnt + 1 where gameid = @gameid_
						end
					else if(@p4_ = 4)
						begin
							update dbo.tUserMaster set bttem2cnt = bttem2cnt + 1 where gameid = @gameid_
						end
					else if(@p4_ = 5)
						begin
							update dbo.tUserMaster set bttem3cnt = bttem3cnt + 1 where gameid = @gameid_
						end
					else if(@p4_ = 6)
						begin
							update dbo.tUserMaster set bttem4cnt = bttem4cnt + 1 where gameid = @gameid_
						end
					else if(@p4_ = 7)
						begin
							update dbo.tUserMaster set bttem5cnt = bttem5cnt + 1 where gameid = @gameid_
						end
					-- 게임시작플래그 설정
					else if(@p4_ = 20)
						begin
							update dbo.tUserMaster set trainflag = 1 where gameid = @gameid_
						end
					else if(@p4_ = 21)
						begin
							update dbo.tUserMaster set machineflag = 1 where gameid = @gameid_
						end
					else if(@p4_ = 22)
						begin
							update dbo.tUserMaster set memorialflag = 1 where gameid = @gameid_
						end
					else if(@p4_ = 23)
						begin
							update dbo.tUserMaster set soulflag = 1 where gameid = @gameid_
						end
					else if(@p4_ = 24)
						begin
							update dbo.tUserMaster set btflag = 1 where gameid = @gameid_
						end
					else if(@p4_ = 25)
						begin
							update dbo.tUserMaster set btflag2 = 1 where gameid = @gameid_
						end
					else if(@p4_ = 26)
						begin
							update dbo.tUserMaster set mboardstate = 0 where gameid = @gameid_
						end
					else if(@p4_ = 27)
						begin
							update dbo.tUserMaster set resultwinpush = 1 where gameid = @gameid_
						end
					else if(@p4_ = 60)
						begin
							update dbo.tUserMaster
								set winstreak = winstreak + case when winstreak < 5 then 1 else 0 end
							where gameid = @gameid_
						end
					else if(@p4_ = 61)
						begin
							update dbo.tUserMaster
								set winstreak2 = winstreak2 + case when winstreak2 < 10 then 1 else 0 end
							where gameid = @gameid_
						end
					else if(@p4_ in (30, 31))
						begin
							declare @_gm	int		set @_gm = 50
							declare @_exp int
							declare @gradeOld int
							declare @gradeStarOld int
							if(@p4_ = 30)
								begin
									set @_exp = 2
								end
							else
								begin
									set @_exp = -2
								end

							select @gradeExp = gradeExp, @grade = grade, @gradeStar = gradeStar, @version = version from dbo.tUserMaster where gameid = @gameid_
							-- 계급 50(version 110이하), 100(버젼 111 이상)
							set @_gm = case when (@version >= 111) then 100 else 50 end


							--1. 전의 그레이드와 별을 백업.
							set @gradeOld = @grade;
							set @gradeStarOld = @gradeStar;

							--2. 경험치 누적.
							set @gradeExp = @gradeExp + @_exp;
							set @grade = @gradeExp / 6 + 1;
							set @gradeStar = @gradeExp % 6;

							--3. +1, +2 > 승급관리.
							if(@gradeExp < 0)
								begin
									set @gradeExp = 0
									set @grade = 1
									set @gradeStar = 0
								end
							else if(@grade > @_gm)
								begin
									set @grade = @_gm
									set @gradeStar = 5
									set @gradeExp = @grade * 6 - 1
								end
							else if(@_exp > 0)
								begin
									if(@grade != @gradeOld or @gradeStar = 5)
										begin
											--gradeOld = ;
											set @gradeStarOld = 5

											set @gradeExp = 6 * @gradeOld + 2
											set @grade = @gradeExp / 6 + 1
											set @gradeStar = @gradeExp % 6
										end
								end
							else if(@_exp < 0)
								begin
									-- -1 > 승하관리, 0이하로는 안내려감.
									if(@grade != @gradeOld)
										begin
											set @gradeExp = 6 * (@grade - 1) + 2
											if(@gradeExp < 0)
												begin
													set @gradeExp = 0
												end
											set @grade = @gradeExp / 6 + 1
											set @gradeStar = @gradeExp % 6
										end
								end


							-- 데이타 입력.
							update dbo.tUserMaster
								set
								gradeExp = @gradeExp,
								grade = @grade,
								gradeStar = @gradeStar
							where gameid = @gameid_
						end
					else if(@p4_ in (35, 36))
						begin
							declare @lv int
							declare @lvexp int
							select @lvexp = lvexp, @lv = lv from dbo.tUserMaster where gameid = @gameid_

							if(@p4_ = 35)
								begin
									if(@lv < 50)
										begin
											set @lvexp = @lvexp + (9*@lv/2 + 10)
											set @lv = @lv + 1
										end
								end
							else
								begin
									if(@lv > 1)
										begin
											set @lv = @lv - 1
											set @lvexp = @lvexp - (9*@lv/2  + 10)
										end
									else
										begin
											set @lv = 1
											set @lvexp = 0
										end
								end


							update dbo.tUserMaster
								set
								lv = @lv,
								lvexp = @lvexp
							where gameid = @gameid_
						end
					else if(@p4_ = 40)
						begin
							--해당로그삭제.
							set @btidx = @ps4_

							insert into tBattleLogBlock select * from dbo.tBattleLog where idx = @btidx

							delete from dbo.tBattleLog where idx = @btidx
						end
					else if(@p4_ = 50)
						begin
							--해당템 만기처리
							select @period = period from dbo.tItemInfo where itemcode = @itemcode_
							if(isnull(@period, -444) > 0)
								begin
									update dbo.tUserItem
										set
											expiredate = getdate()
									where gameid = @gameid_ and itemcode = @itemcode_ and expirestate = 0
								end
						end
					else if(@p4_ = 51)
						begin
							--해당템 연장처리
							select @period = period from dbo.tItemInfo where itemcode = @itemcode_
							if(isnull(@period, -444) > 0)
								begin
									update dbo.tUserItem
										set
											expiredate = getdate() + 1,
											expirestate = 0
									where gameid = @gameid_ and itemcode = @itemcode_ and expirestate = 1
								end
						end
					else if(@p4_ = 70)
						begin
							--아이템 강화
							update dbo.tUserItem
								set
									upgradestate = upgradestate + 1
							where gameid = @gameid_ and itemcode = @itemcode_
						end
					else if(@p4_ = -70)
						begin
							--아이템 강화
							update dbo.tUserItem
								set
									upgradestate = upgradestate + (-1)
							where gameid = @gameid_ and itemcode = @itemcode_
						end
					else if(@p4_ = 100)
						begin
							update dbo.tUserMaster set itemupgradecnt = case when itemupgradecnt + @p2 < 0 then 0 else itemupgradecnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 101)
						begin
							update dbo.tUserMaster set itemupgradebest = case when itemupgradebest + @p2 < 0 then 0 else itemupgradebest + @p2 end where gameid = @gameid_
						end

					else if(@p4_ = 110)
						begin
							update dbo.tUserMaster set petmatingcnt = case when petmatingcnt + @p2 < 0 then 0 else petmatingcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 111)
						begin
							update dbo.tUserMaster set petmatingbest = case when petmatingbest + @p2 < 0 then 0 else petmatingbest + @p2 end where gameid = @gameid_
						end

					else if(@p4_ = 120)
						begin
							update dbo.tUserMaster set machpointaccrue = case when machpointaccrue + @p2 < 0 then 0 else machpointaccrue + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 121)
						begin
							update dbo.tUserMaster set machpointbest = case when machpointbest + @p2 < 0 then 0 else machpointbest + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 122)
						begin
							update dbo.tUserMaster set machplaycnt = case when machplaycnt + @p2 < 0 then 0 else machplaycnt + @p2 end where gameid = @gameid_
						end

					else if(@p4_ = 130)
						begin
							update dbo.tUserMaster set mempointaccrue = case when mempointaccrue + @p2 < 0 then 0 else mempointaccrue + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 131)
						begin
							update dbo.tUserMaster set mempointbest = case when mempointbest + @p2 < 0 then 0 else mempointbest + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 132)
						begin
							update dbo.tUserMaster set memplaycnt = case when memplaycnt + @p2 < 0 then 0 else memplaycnt + @p2 end where gameid = @gameid_
						end

					else if(@p4_ = 140)
						begin
							update dbo.tUserMaster set friendaddcnt = case when friendaddcnt + @p2 < 0 then 0 else friendaddcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 141)
						begin
							update dbo.tUserMaster set friendvisitcnt = case when friendvisitcnt + @p2 < 0 then 0 else friendvisitcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 150)
						begin
							update dbo.tUserMaster set pollhitcnt = case when pollhitcnt + @p2 < 0 then 0 else pollhitcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 151)
						begin
							update dbo.tUserMaster set ceilhitcnt = case when ceilhitcnt + @p2 < 0 then 0 else ceilhitcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 152)
						begin
							update dbo.tUserMaster set boardhitcnt = case when boardhitcnt + @p2 < 0 then 0 else boardhitcnt + @p2 end where gameid = @gameid_
						end

					else if(@p4_ = 160)
						begin
							update dbo.tUserMaster set btdistaccrue = case when btdistaccrue + @p2 < 0 then 0 else btdistaccrue + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 161)
						begin
							update dbo.tUserMaster set btdistbest = case when btdistbest + @p2 < 0 then 0 else btdistbest + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 162)
						begin
							update dbo.tUserMaster set bthrcnt = case when bthrcnt + @p2 < 0 then 0 else bthrcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 163)
						begin
							update dbo.tUserMaster set bthrcombo = case when bthrcombo + @p2 < 0 then 0 else bthrcombo + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 164)
						begin
							update dbo.tUserMaster set btwincnt = case when btwincnt + @p2 < 0 then 0 else btwincnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 165)
						begin
							update dbo.tUserMaster set btwinstreak = case when btwinstreak + @p2 < 0 then 0 else btwinstreak + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 166)
						begin
							update dbo.tUserMaster set btplaycnt = case when btplaycnt + @p2 < 0 then 0 else btplaycnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 170)
						begin
							update dbo.tUserMaster set spdistaccrue = case when spdistaccrue + @p2 < 0 then 0 else spdistaccrue + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 171)
						begin
							update dbo.tUserMaster set spdistbest = case when spdistbest + @p2 < 0 then 0 else spdistbest + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 172)
						begin
							update dbo.tUserMaster set sphrcnt = case when sphrcnt + @p2 < 0 then 0 else sphrcnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 173)
						begin
							update dbo.tUserMaster set sphrcombo = case when sphrcombo + @p2 < 0 then 0 else sphrcombo + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 174)
						begin
							update dbo.tUserMaster set spwincnt = case when spwincnt + @p2 < 0 then 0 else spwincnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 175)
						begin
							update dbo.tUserMaster set spwinstreak = case when spwinstreak + @p2 < 0 then 0 else spwinstreak + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 176)
						begin
							update dbo.tUserMaster set spplaycnt = case when spplaycnt + @p2 < 0 then 0 else spplaycnt + @p2 end where gameid = @gameid_
						end
					else if(@p4_ = 200)
						begin
							-- 퀘스트를 2일전으로 순환 초기화
							update dbo.tQuestUser
								set
									queststate = case
													when queststate = 0 then 1
													when queststate = 1 then 2
													else 0
												end,
									queststart = getdate() - 2
							where gameid = @gameid_ and questcode = @p2
						end
					else if(@p4_ = 201)
						begin
							-- 퀘스트를 2일전으로 순환 초기화
							update dbo.tQuestUser
								set
									queststart = getdate() - 2
							where gameid = @gameid_ and questcode = @p2
						end
					else if(@p4_ = 300)
						begin
							update dbo.tUserMaster
								set
									smsCount = case
													when smsCount + 1 > smsMax then smsMax
													else smsCount + 1
												end
							where gameid = @gameid_
						end
					else if(@p4_ = 302)
						begin
							delete from dbo.tUserSMSLog
							where idx = @p5_
						end
					else if(@p4_ = 400)
						begin
							set @branchurl 		= @message_
							set @recepushid 	= ''

							select @recepushid = pushid, @market = market from dbo.tUserMaster where gameid = @gameid_

							--select @ps2_, @gameid_, @recepushid, @p5_, 99, @ps3_, @ps4_, @branchurl
							if(@recepushid != '')
								begin
									if(@market = @IPHONE)
										begin
											insert into dbo.tUserPushiPhone(sendid, receid, recepushid, sendkind, msgpush_id, msgtitle, msgmsg, msgaction)
											values(@ps2_, @gameid_, @recepushid, @p5_, 99, @ps3_, @ps4_, @branchurl)
										end
									else
										begin
											insert into dbo.tUserPushAndroid(sendid, receid, recepushid, sendkind, msgpush_id, msgtitle, msgmsg, msgaction)
											values(@ps2_, @gameid_, @recepushid, @p5_, 99, @ps3_, @ps4_, @branchurl)
										end
								end

						end
					else if(@p4_ = 401)
						begin
							set @branchurl 		= @message_

							if(@p6_ = @IPHONE)
								begin
									insert into dbo.tUserPushiPhone(recepushid, sendid, receid, sendkind, msgpush_id, msgtitle, msgmsg, msgaction)
										select distinct pushid, @ps2_, @gameid_, @p5_, 99, @ps3_, @ps4_, @branchurl from dbo.tUserMaster
											where market = @p6_ and pushid is not null and len(pushid) > 50
											--and gameid in ('guest74019', 'guest74022')
								end
							else
								begin
									insert into dbo.tUserPushAndroid(recepushid, sendid, receid, sendkind, msgpush_id, msgtitle, msgmsg, msgaction)
										select distinct pushid, @ps2_, @gameid_, @p5_, 99, @ps3_, @ps4_, @branchurl from dbo.tUserMaster
											where market = @p6_ and pushid is not null and len(pushid) > 50
											--and gameid in ('guest74019', 'guest74022')
								end
						end
					else if(@p4_ = 402)
						begin
							select @cnt = count(*) from dbo.tUserPushAndroid
							select @cnt2 = count(*) from dbo.tUserPushiPhone
							select @RESULT_SUCCESS 'rtn', @cnt cnt, @cnt2 cnt2
						end
					else if(@p4_ = 500)
						begin
							if(exists(select top 1 * from dbo.tTotoUser where idx = @p5_))
								begin
									select @gameid = gameid, @chalsb = chalsb from dbo.tTotoUser where idx = @p5_

									--유저 실버 복구
									update dbo.tUserMaster
										set
											silverball = silverball + @chalsb
									where gameid = @gameid

									-- 데이타 삭제
									delete from dbo.tTotoUser
									where idx = @p5_
								end
						end
					else if(@p4_ = 501)
						begin
							if(@ps2_ = '')
								begin
									select top 100 u.*,
										m.totodate, m.title, m.acountry, m.bcountry, m.apoint, m.bpoint, m.victcountry, m.victpoint, m.chalmode1give, m.chalmode2give, m.givedate
									from dbo.tTotoUser u join dbo.tTotoMaster m on u.totoid = m.totoid
									order by u.idx desc
								end
							else
								begin
									select top 100 u.*,
										m.totodate, m.title, m.acountry, m.bcountry, m.apoint, m.bpoint, m.victcountry, m.victpoint, m.chalmode1give, m.chalmode2give, m.givedate
									from dbo.tTotoUser u join dbo.tTotoMaster m on u.totoid = m.totoid
									where gameid = @ps2_
									order by u.idx desc
								end
						end
					else if(@p4_ = 600)
						begin
							update dbo.tMessage
								set
									newmsg = 1
							where idx = @p5_
						end
					else if(@p4_ = 700)
						begin
							-- 관리자 액션 기록
							set @comment3 = ('뽑기코인 지급 ' + ltrim(rtrim(str(@p5_))) + '개')
							exec spu_AdminAction @gameid_, '전유저', @comment3

							-- 유저들에게 코인지급
							update dbo.tUserMaster
								set
									coin = case
										when coin < @p5_ then @p5_
										else coin end

						end
					else if(@p4_ = 701)
						begin
							-- 관리자 액션 기록
							set @comment3 = ('아이템지급(' + ltrim(rtrim(str(@itemcode_))) + ')')
							exec spu_AdminAction @gameid_, '전유저', @comment3

							select @comment3 = itemname from dbo.tItemInfo where itemcode = @itemcode_

							-- 유저들에게 아이템 지급하기
							insert into dbo.tGiftList(gameid, itemcode, giftid, period2)
								select gameid, @itemcode_, '홈런리그GM', 7 from dbo.tUserMaster
									where condate > dateadd(d, -7, getdate())

							insert into dbo.tMessage(gameid, comment)
								select gameid, '홈런리그GM이 ' + @comment3 + '을 선물했습니다.' from dbo.tUserMaster
									where condate > dateadd(d, -7, getdate())

						end
					select @RESULT_SUCCESS 'rtn'
				end
			else
				begin
					select @RESULT_ERROR 'rtn'
				end
		end
	-----------------------------------------------------
	--	일반정보리스트
	-----------------------------------------------------
	else if(@kind_ = @KIND_NEWINFO_LIST)
		begin
			if(@p4_ = 301)
				begin
					-- 유저환전로그
					if(isnull(@gameid_, '') = '')
						begin
							select top 100 * from dbo.tUserSMSLog order by idx desc
						end
					else
						begin
							select top 100 * from dbo.tUserSMSLog where gameid = @gameid_ order by idx desc
						end
				end
			else if(@p4_ = 400)
				begin
					if(isnull(@gameid_, '') = '')
						begin
							select top 100 * from dbo.tUserRewardLog order by idx desc
						end
					else
						begin
							select top 100 * from dbo.tUserRewardLog where gameid = @gameid_ order by idx desc
						end
				end
			else if(@p4_ = 401)
				begin
					set @dateid = @ps2_
					if(isnull(@dateid, '') = '')
						begin
							set @dateid8 = Convert(varchar(8), Getdate() - 30,112)
							select top 100 * from dbo.tUserRewardLogTotal
							where dateid >= @dateid8
							order by dateid desc
						end
					else
						begin
							set @dateid8 = @dateid
							select * from dbo.tUserRewardLogTotal
							where dateid = @dateid8
							order by dateid desc
						end
				end
		end
	-----------------------------------------------------
	--	오픈테스트
	-----------------------------------------------------
	else if(@kind_ in (@KIND_OPEN_TEST))
		begin
			set @subkind 	= @p4_
			set @ordercnt 	= @p5_
			set @email 		= @ps2_
			set @phonenum 	= @ps3_
			if(@subkind = 1)
				begin
					-- 모집 x차
					if(isnull(@email, '') != '')
						begin
							if(not exists(select top 1 * from dbo.tTestOpenBeta where email = @email and ordercnt = @ordercnt))
								begin
									insert into dbo.tTestOpenBeta(email, ordercnt, phonenum) values(@email, @ordercnt, @phonenum);
									select @RESULT_SUCCESS 'rtn', '성공적으로 등록했습니다.' msg
								end
							else
								begin
									select @RESULT_ERROR 'rtn', '이미 등록했습니다.' msg
								end
						end
					else
						begin
							select @RESULT_ERROR 'rtn', '이메일을 입력해주세요.' msg
						end
				end
			else if(@subkind = 10)
				begin
					select * from dbo.tTestOpenBeta
					where ordercnt = @ordercnt
					order by idx desc
				end

		end


	-----------------------------------------------------
	--	관리자 로그인
	-----------------------------------------------------
	else if(@kind_ = @KIND_ADMIN_LOGIN)
		begin
			set @subkind = @p2
			if(@subkind	= 1)
				begin
					if(not exists(select * from dbo.tAdminUser where gameid = @ps1))
						begin
							if(@p3 = -1)
								begin
									set @p3 = 0
								end
							insert into tAdminUser(gameid, password, grade) values(@ps1, @ps2_, @p3)
							select 1 'rtn'
						end
					else
						begin
							select -1 'rtn'
						end
				end
			else if(@subkind = 2)
				begin
					set @grade = -1
					select @grade = grade from dbo.tAdminUser where gameid = @ps1 and password = @ps2_
					if(@grade != -1)
						begin
							select 1 'rtn', @grade grade, '입력'
						end
					else
						begin
							select -1 'rtn', 0 grade, '입력'
						end
				end
			else if(@subkind = 3)
				begin
					set @grade = -1
					select @grade = grade from dbo.tAdminUser where gameid = @ps1
					if(@grade != -1)
						begin
							update dbo.tAdminUser
								set
									password 	= @ps2_,
									grade 		= @p3
							where gameid = @ps1

							select 1 'rtn', @grade grade, '(수정)'
						end
					else
						begin
							select -1 'rtn', 0 grade, '(수정)'
						end
				end
			else if(@subkind = 4)
				begin
					delete from dbo.tAdminUser where gameid = @ps1 and password = @ps2_
					select 1 'rtn', 0, '(삭제)'
				end
		end



	------------------------------------------------
	--	완료
	------------------------------------------------
	set nocount off
End

